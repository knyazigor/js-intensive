# Занятие 2  — Сети, JS (Типы данных, приведение типов)

## 1. Метод запроса OPTIONS

Для работы с сервером в протоколе *HTTP* для получения, отправки, редактирования и удаления информации клиент использует различные методы (`GET`, `POST`, `PUT`, `DELETE` и другие). Одним из таких методов является `OPTIONS`.

HTTP-метод **`OPTIONS`** используется для описания параметров соединяния с ресурсом. Он используется, когда клиент хочет узнать, какие действия он может предпринять по отношению к указанному ресурсу, включая информацию о допустимых методах и их параметрах, а также о поддерживаемых заголовках и кодировках.
Простейшим примером использования метода `OPTIONS` является ответ, содержащий список допустимых методов для данного ресурса в заголовке `Allow`:

```
HTTP/1.1 200 OK
Allow: OPTIONS, GET, HEAD, POST
Cache-Control: max-age=604800
Date: Thu, 13 Oct 2016 11:45:00 GMT
Expires: Thu, 20 Oct 2016 11:45:00 GMT
Server: EOS (lax004/2813)
x-ec-custom-error: 1
Content-Length: 0
```

Этот метод обычно используется для определения возможностей сервера перед тем, как выполнять другие действия, например, при реализации предварительного просмотра гиперссылок или при работе с *CORS (Cross-Origin Resource Sharing)*. По технологии CORS, с помощью метода `OPTIONS` направляется предварительный запрос, поэтому сервер может ответить приемлемо ли отправлять запросы этим методом.

## 2. Ключевые особенности протокола HTTP/3

**HTTP/3** новый протокол передачи гипертекста *HTTP* находящийся в разработке, но уже поддерживаемый большинством популярных браузеров. Ниже перечислены его ключевые особенности по сравнению с *HTTP/1.1* и *HTTP/2*.

### 1. Использование нового транспортного протокола **QUIC**

Десятилетиями весь интернет держался на *TCP*, но он начал устаревать ещё в конце 2000-х. Его предполагаемая замена, новый транспортный протокол под названием **QUIC**, настолько отличается от *TCP* по ключевым пунктам, что просто использовать поверх него *HTTP/2* было бы очень сложно. Поэтому сам по себе *HTTP/3* — это относительно незначительное изменение *HTTP/2* для адаптации к новому протоколу *QUIC*. Он, в отличие от *TCP*, работает поверх *UDP*, содержит встроенную возможность шифрования, имеет более низкую задержку соединения и передачи, хорошо переносит потерю части пакетов.

### 2. Бинарное форматирование

Как и в *HTTP/2*, данные в *HTTP/3* передаются в бинарном виде. Явным преимуществом такого подхода является уменьшение размера передаваемых данных и как следствие уменьшение времени загрузки страниц.

### 3. Мультиплексирование

Мультиплексирование (выполнение множества запросов в рамках одного соединения) появилось еще в *HTTP/2*, однако имело ограничения связанные с протоколом *TCP*: браузер может открыть только одно *TCP*-соединение с сервером. Он использует одно и то же соединени для запроса несколькиъ объектов (файлы мультимедиа, CSS, JS). При получении этих объектов *TCP* сериализует все объекты в одном потоке. В результате он понятия не имеет о разделении сегментов *TCP* на уровне объекта.

Как уже было сказано ранее, HTTP/3 работает с новым транспортным протоколом *QUIC*.

*QUIC* вводит понятие мультиплексирования нескольких потоков в одном соединении. *QUIC* по своей конструкции реализует раздельное управление потоком для каждого потока, что решает проблему блокировки начала очереди (HoL) всего соединения.

### 4. Сжатие заголовков

*HTTP/3* также использует новый механизм сжатия заголовков под названием *QPACK*, который является модификацией *HPACK*, используемой в *HTTP/2*. В *QPACK* заголовки *HTTP* могут поступать не по порядку в разных потоках *QUIC*. В отличие от *HTTP/2*, где *TCP* обеспечивает упорядоченную доставку пакетов, потоки *QUIC* доставляются не по порядку и могут содержать разные заголовки в разных потоках. Чтобы справиться с этим, *QPACK* использует механизм таблицы поиска для кодирования и декодирования заголовков.

### 5. Обработка ошибок

*QUIC* предлагает использовать усовершенствованный механизм восстановления после потерь и прямое исправление ошибок, чтобы справляться с ошибочными пакетами, особенно в неоднородных и медленных беспроводных сетях, подверженных высокому уровню ошибок при передаче.